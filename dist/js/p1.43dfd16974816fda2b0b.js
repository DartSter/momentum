(()=>{"use strict";function e(e,t="ru-RU"){e.placeholder={"ru-RU":"[Введите имя]","en-US":"[Enter name]"}[t]}function t(e,t){localStorage.setItem(e,t.value)}function o(e,t){localStorage.getItem(e)&&(t.value=localStorage.getItem(e))}const a=document.querySelector("body");let n=`${Math.ceil(20*Math.random())}`.padStart(2,0);const s=r();function r(){return["night","morning","afternoon","evening"][Math.floor((new Date).getHours()/6)]}const i={github:function(){return`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${s}/${n}.jpg`},unsplash:async function(e){const t=`https://api.unsplash.com/photos/random?query=${e||r()}&client_id=FdC5DssuHcxoiXyZAuJAaWOfpJd0IDXYO28ZguY7-Lw`,o=await fetch(t),a=await o.json();return await a.urls.regular},flickr:async function(e){const t=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=bba5817a068beea4959347491b3adeaf&tags=${e||r()}&extras=url_l&format=json&nojsoncallback=1`,o=await fetch(t),a=await o.json();return await a.photos.photo[`${Math.ceil(100*Math.random())}`.padStart(2,0)].url_l}};async function c(e="github",t=s){const o=new Image;o.src=await i[e](t),o.onload=()=>a.style.backgroundImage=`url(${o.src})`}const l="377b8386dd1eb3af7f7770726f59ece1",u=document.querySelector(".weather-icon"),d=document.querySelector(".temperature"),h=document.querySelector(".weather-description");async function g(e,t){const o=`https://api.openweathermap.org/data/2.5/weather?q=${e}&lang=${t}&appid=${l}&units=metric`,a=await fetch(o),n=await a.json();u.className="weather-icon owf",u.classList.add(`owf-${n.weather[0].id}`),d.textContent=`${Math.ceil(n.main.temp)}°C`,h.textContent=n.weather[0].description}const m={"ru-RU":[["«Чем умнее человек, тем легче он признает себя дураком».","Альберт Эйнштейн"],["«Никогда не ошибается тот, кто ничего не делает».","Теодор Рузвельт"],["«Менее всего просты люди, желающие казаться простыми».","Лев Николаевич Толстой"],["«Мы находимся здесь, чтобы внести свой вклад в этот мир. Иначе зачем мы здесь?»","Стив Джобс"],["«Мода проходит, стиль остаётся».","Коко Шанель"],["«Если человек не нашёл, за что может умереть, он не способен жить».","Мартин Лютер Кинг"],["«Музыка заводит сердца так, что пляшет и поёт тело. А есть музыка, с которой хочется поделиться всем, что наболело».","Джон Леннон"],["«Если кто-то причинил тебе зло, не мсти. Сядь на берегу реки, и вскоре ты увидишь, как мимо тебя проплывает труп твоего врага».","Лао-цзы"],['«Лучше быть хорошим человеком, "ругающимся матом", чем тихой, воспитанной тварью».',"Фаина Раневская"],["«Если тебе тяжело, значит ты поднимаешься в гору. Если тебе легко, значит ты летишь в пропасть».","Генри Форд"],["«Мой способ шутить – это говорить правду. На свете нет ничего смешнее».","Бернард Шоу"],["«Чем больше любви, мудрости, красоты, доброты вы откроете в самом себе, тем больше вы заметите их в окружающем мире».","Мать Тереза"],["«Единственный человек, с которым вы должны сравнивать себя, – это вы в прошлом. И единственный человек, лучше которого вы должны быть, – это вы сейчас».","Зигмунд Фрейд"],["«Невозможность писать для меня равносильна погребению заживо...»","Михаил Булгаков"],["«История – самый лучший учитель, у которого самые плохие ученики».","Индира Ганди"],["«Дай человеку власть, и ты узнаешь, кто он».","Наполеон Бонапарт"],["«Ядерную войну невозможно выиграть».","Андрей Сахаров"],["«Поражение? Я не понимаю значения этого слова».","Маргарет Тэтчер"],["«Некоторые люди проводят жизнь в поисках любви вне их самих... Пока любовь в моём сердце, она повсюду».","Майкл Джексон"],["«Человечество обладает одним поистине мощным оружием, и это смех».","Марк Твен"],["«Тренируйся с теми, кто сильнее. Не сдавайся там, где сдаются другие. И победишь там, где победить нельзя».","Брюс Ли"],["«Комедия – это очень серьёзное дело!»","Юрий Никулин"],["«Будьте менее любопытны о людях, но более любопытны об идеях».","Мария Кюри"],["«Когда я собираюсь писать новый сценарий, самое трудное для меня – это пойти в канцтовары и купить блокнот».","Квентин Тарантино"],["«Ненавижу всяческую мертвечину! Обожаю всяческую жизнь!»","Владимир Маяковский"],["«Мышление – верх блаженства и радость жизни, доблестнейшее занятие человека».","Аристотель"],["«У тебя есть враги? Хорошо. Значит, в своей жизни ты что-то когда-то отстаивал».","Уинстон Черчилль"],["«Когда-нибудь не страшно умереть – страшно умереть вот сейчас».","Александр Солженицын"],["«Я серьёзно отношусь к своей работе, а это возможно только при несерьёзном отношении к собственной персоне».","Алан Рикман"]],"en-US":[["Be yourself; everyone else is already taken.","Oscar Wilde"],["I'm selfish, impatient and a little insecure. I make mistakes, I am out of control and at times hard to handle. But if you can't handle me at my worst, then you sure as hell don't deserve me at my best.","Marilyn Monroe"],["Two things are infinite: the universe and human stupidity; and I'm not sure about the universe.","Albert Einstein"],["So many books, so little time.","Frank Zappa"],["A room without books is like a body without a soul.","Marcus Tullius Cicero"],["Be who you are and say what you feel, because those who mind don't matter, and those who matter don't mind.","Bernard M. Baruch"],["You've gotta dance like there's nobody watching, Love like you'll never be hurt, Sing like there's nobody listening, And live like it's heaven on earth.","William W. Purkey"],["You know you're in love when you can't fall asleep because reality is finally better than your dreams.","Dr. Seuss"],["You only live once, but if you do it right, once is enough.","Mae West"],["Be the change that you wish to see in the world.","Mahatma Gandhi"],["In three words I can sum up everything I've learned about life: it goes on.","Robert Frost"],["If you want to know what a man's like, take a good look at how he treats his inferiors, not his equals.","J.K. Rowling"],["Don’t walk in front of me… I may not follow \n    Don’t walk behind me… I may not lead\n    Walk beside me… just be my friend","Albert Camus"],["If you tell the truth, you don't have to remember anything.","Mark Twain"],['Friendship ... is born at the moment when one man says to another "What! You too? I thought that no one but myself . . .',"C.S. Lewis"],["I've learned that people will forget what you said, people will forget what you did, but people will never forget how you made them feel.","Maya Angelou"],["A friend is someone who knows all about you and still loves you.","Elbert Hubbard"],["To live is the rarest thing in the world. Most people exist, that is all.","Oscar Wilde"],["Always forgive your enemies; nothing annoys them so much.","Oscar Wilde"],["Darkness cannot drive out darkness: only light can do that. Hate cannot drive out hate: only love can do that.","Martin Luther King Jr."],["Live as if you were to die tomorrow. Learn as if you were to live forever.","Mahatma Gandhi"],["We accept the love we think we deserve.","Stephen Chbosky"],["Without music, life would be a mistake.","Friedrich Nietzsche"],["I am so clever that sometimes I don't understand a single word of what I am saying.","Oscar Wilde"],["To be yourself in a world that is constantly trying to make you something else is the greatest accomplishment.","Ralph Waldo Emerson"]]};function y(e,t,o,a){const n=a[o],s=Math.floor(Math.random()*n.length);e.textContent=n[s][0],t.textContent=n[s][1]}const S=document.querySelector(".language-title"),p=document.querySelector(".image-api-title"),v=document.querySelector(".app-select"),f=document.querySelector(".selected-list").querySelectorAll(".setting-item"),w={time:["Time","Время"],date:["Date","Дата"],"greeting-container":["Greeting","Приветствие"],"quote-container":["Quotes","Цитаты"],weather:["Weather","Погода"],player:["Player","Плеер"],"todolist-container":["ToDoList","Список дел"]};let k=localStorage.getItem("lang")?"EN"===localStorage.getItem("lang")?"en-US":"ru-RU":"en-US";const L=localStorage.getItem("state")?JSON.parse(localStorage.getItem("state")):{photoSource:"github",tag:"",blocks:["time","date","greeting-container","quote-container","weather","player","todolist-container"]};function b(){localStorage.setItem("state",JSON.stringify(L))}const q=document.querySelector(".settings-btn"),E=document.querySelector(".settings");!function(e){S.textContent="en-US"===e?"Change language":"Поменять язык",p.textContent="en-US"===e?"Image source":"Источник изображения",v.textContent="en-US"===e?"Visible apps":"Активные приложения",f.forEach((t=>{t.textContent="en-US"===e?w[t.dataset.block][0]:w[t.dataset.block][1]}))}(k),q.addEventListener("click",(()=>{E.classList.toggle("show")}));const C=document.querySelector(".selected-list"),I=C.querySelectorAll(".setting-item"),T=document.querySelectorAll(".app");function x(){I.forEach((e=>{L.blocks.includes(e.dataset.block)?e.classList.add("active-app"):e.classList.remove("active-app")}))}function A(){T.forEach((e=>{L.blocks.includes(e.classList[0])?e.classList.remove("hide"):e.classList.add("hide")}))}x(),A(),C.addEventListener("click",(e=>{if(!e.target.dataset.block)return;const t=e.target.dataset.block;L.blocks.includes(t)?L.blocks=L.blocks.filter((e=>e!=t)):L.blocks.push(t),x(),b(),A()})),function e(t,o,a,n){const s=(new Date).toLocaleTimeString();t.textContent=s,function(e,t="ru-RU"){const o=(new Date).toLocaleDateString(t,{weekday:"long",month:"long",day:"numeric"});e.textContent=o}(o,n),function(e,t="ru-RU"){const o=(new Date).getHours();e.textContent={"ru-RU":["Доброй ночи,","Доброе утро,","Добрый день,","Добрый вечер,"],"en-US":["Good night,","Good morning,","Good afternoon,","Good evening,"]}[t][Math.floor(o/6)]}(a,n),setTimeout(e,1e3,t,o,a,n)}(document.querySelector(".time"),document.querySelector(".date"),document.querySelector(".greeting"),k);const M=document.querySelector(".name");localStorage.getItem("name")||e(M,k),M.addEventListener("change",(t=>{t.target.value||e(M,k)}));const D=document.querySelector(".image-api"),N=document.querySelector(".slide-next"),U=document.querySelector(".slide-prev"),$=D.querySelectorAll(".setting-item"),W=document.querySelector(".apiTag");function R(){"github"===L.photoSource?W.disabled=!0:W.disabled=!1,W.disabled?W.classList.add("hide"):W.classList.remove("hide")}$.forEach((e=>{e.dataset.api===L.photoSource&&e.classList.add("active-api")})),W.placeholder="en-US"===k?"Input background theme":"Тема фона на английском",R(),W.addEventListener("change",(e=>{const t=e.target.value;c(L.photoSource,t),L.tag=t,b(),W.value=""}));const O=document.querySelector(".remove-tag");O.textContent="en-US"===k?"Remove tag":"Удалить тег",O.addEventListener("click",(()=>{L.tag="",b(),c(L.photoSource)})),D.addEventListener("click",(e=>{L.photoSource=e.target.dataset.api,c(L.photoSource),b(),$.forEach((e=>e.classList.remove("active-api"))),e.target.classList.add("active-api"),R()})),c(L.photoSource,L.tag),N.addEventListener("click",(()=>async function(e="github",t=s){"github"===e?(n="20"===n?"01":(""+(+n+1)).padStart(2,0),c(e)):c(e,t)}(L.photoSource,L.tag))),U.addEventListener("click",(()=>async function(e="github",t=s){"github"===e?(n="01"===n?"20":(""+(+n-1)).padStart(2,0),c(e)):c(e,t)}(L.photoSource,L.tag)));const B="%D0%9C%D0%B8%D0%BD%D1%81%D0%BA";let J="ru-RU"===k?"ru":"en";const F=document.querySelector(".city");g(B,J),F.placeholder="ru-RU"===k?"Минск":"Minsk",F.addEventListener("change",(e=>{e.target.value?g(e.target.value,J):g(B,J)}));const Y=document.querySelector(".quote"),j=document.querySelector(".author"),G=document.querySelector(".change-quote");y(Y,j,k,m),G.addEventListener("click",(()=>{y(Y,j,k,m)}));let H=!1;const P=new class{constructor(e){this.playList=e,this.counter=0,this.audio=new Audio}getSongElement(){return this.audio}getSongName(){return this.playList[this.counter].title}formateTime(e){let t=Math.floor(e/60),o=Math.floor(e-60*t);return o<10&&(o=`0${o}`),`${t}:${o}`}getSongTiming(e,t,o){"NaN:NaN"!==this.formateTime(this.audio.duration)&&o&&(e.textContent=`${this.formateTime(this.audio.currentTime)}/${this.formateTime(this.audio.duration)}`,t.max=this.audio.duration,t.value=this.audio.currentTime)}changSongTime(e){this.audio.currentTime=e.value}changeAudioSrc(e=this.counter){this.audio.src=this.playList[e].src}showCurrentSong(e=this.counter){const t=document.querySelectorAll(".song");t.forEach((e=>e.classList="song")),t[e].classList.add("current-song")}play(e,t=0){this.changeAudioSrc(),t.value&&(this.audio.currentTime=t.value),e?this.audio.play():this.audio.pause(),this.showCurrentSong()}playPrev(){this.counter<=0?this.counter=this.playList.length-1:this.counter--,this.changeAudioSrc(),this.audio.play(),this.showCurrentSong()}playNext(){this.counter+1>=this.playList.length?this.counter=0:this.counter++,this.changeAudioSrc(),this.audio.play(),this.showCurrentSong()}createPlayList(e){this.playList.forEach(((t,o)=>{const a=document.createElement("li");a.classList.add("song"),a.dataset.ind=o,a.textContent=t.title,e.append(a)}))}changeSong(e,t){this.changeAudioSrc(e),this.counter=e,this.play(t)}changeSound(e){this.audio.volume=e/100}}([{title:"Aqua Caelestis",src:"../assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{title:"River Flows In You",src:"../assets/sounds/River Flows In You.mp3",duration:"03:50"},{title:"Ennio Morricone",src:"../assets/sounds/Ennio Morricone.mp3",duration:"01:37"},{title:"Summer Wind",src:"../assets/sounds/Summer Wind.mp3",duration:"01:50"}]);let _=P.getSongElement();const Z=document.querySelector(".play"),K=document.querySelector(".play-prev"),X=document.querySelector(".play-next"),z=document.querySelector(".play-list"),Q=document.querySelector(".song-name"),V=document.querySelector(".song-duration"),ee=document.querySelector(".progress-bar"),te=document.querySelector(".sound"),oe=document.querySelector(".sound-bar");let ae=100;function ne(){H||(H=!H,Z.classList.toggle("pause"))}P.createPlayList(z),Z.addEventListener("click",(()=>{Z.classList.toggle("pause"),H=!H,P.play(H,ee),Q.textContent=P.getSongName()})),K.addEventListener("click",(()=>{ne(),P.playPrev(),_=P.getSongElement(),Q.textContent=P.getSongName()})),X.addEventListener("click",(()=>{ne(),P.playNext(),_=P.getSongElement(),Q.textContent=P.getSongName()})),z.addEventListener("click",(e=>{ne(),P.changeSong(e.target.dataset.ind,H),_=P.getSongElement(),Q.textContent=P.getSongName()})),_.addEventListener("ended",(()=>{P.playNext(),_=P.getSongElement()})),ee.addEventListener("change",(()=>{P.changSongTime(ee)})),oe.addEventListener("change",(()=>{P.changeSound(oe.value)})),te.addEventListener("click",(()=>{te.classList.toggle("mute"),te.classList.contains("mute")?(P.changeSound(0),ae=oe.value,oe.value=0):(P.changeSound(ae),oe.value=ae)})),setInterval((()=>{P.getSongTiming(V,ee,H)}),500);const se=document.querySelector(".language");se.addEventListener("click",(e=>{"EN"===e.target.textContent?e.target.textContent="РУС":e.target.textContent="EN",k="EN"===e.target.textContent?"en-US":"ru-RU",localStorage.setItem("lang",se.textContent),location.reload()})),localStorage.getItem("lang")||(se.textContent="EN"),document.querySelector(".todo-title").textContent="en-US"===k?"To do today":"Дела сегодня";const re=document.querySelector(".todo-list"),ie=document.querySelector(".todo");ie.placeholder="en-US"===k?"[What to do?]":"[Какие планы?]";const ce=new class{constructor(e,t=[]){this.taskList=e,this.taskArray=t}clearCode(){document.querySelectorAll(".task-list-item").forEach((e=>e.remove()))}returnTaskList(){return this.taskArray}creatTask(e){this.taskArray.push(e)}createTaskList(){this.clearCode(),this.taskArray.forEach(((e,t)=>{const o=document.createElement("li");o.classList.add("task-list-item"),o.innerHTML=`<span>${e}</span> <button class='remove-task' id=${t}></button>`,this.taskList.append(o)})),this.setToDoListToLocalStorage()}removeTask(e){this.taskArray=this.taskArray.filter(((t,o)=>o!=e)),this.createTaskList(),this.setToDoListToLocalStorage()}setToDoListToLocalStorage(){localStorage.setItem("todo",JSON.stringify(this.taskArray))}getToDoListFromLocalStorage(){return localStorage.getItem("todo")}}(re,localStorage.getItem("todo")?JSON.parse(localStorage.getItem("todo")):[]);ce.createTaskList(),ie.addEventListener("change",(e=>{ce.creatTask(e.target.value),ce.createTaskList(),e.target.value=""})),re.addEventListener("click",(e=>{const t=e.target;t.classList.contains("remove-task")&&ce.removeTask(t.id)})),window.addEventListener("beforeunload",(function(){t("name",M),t("city",F),b(),ce.setToDoListToLocalStorage()})),window.addEventListener("load",(function(){o("name",M),o("city",F),localStorage.getItem("lang")&&(se.textContent=localStorage.getItem("lang")),ce.taskArray=JSON.parse(localStorage.getItem("todo"))}))})();